/*! For license information please see 573.ce237325.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmeshtastic_admin_frontend=self.webpackChunkmeshtastic_admin_frontend||[]).push([[573],{573:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(2555),n=a(5043),l=a(6139),c=a(3230),r=a(5592),i=a(1360),o=a(1639);const d=(0,o.A)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);var x=a(4596);const h=(0,o.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var m=a(4319);const p=(0,o.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var u=a(9855),y=a(8693),g=a(579);const j=()=>{const{isConnected:e}=(0,l.h3)(),[s,a]=(0,n.useState)([]),[o,j]=(0,n.useState)([]),[v,f]=(0,n.useState)({}),[b,N]=(0,n.useState)(!0),[k,w]=(0,n.useState)(!1),[A,C]=(0,n.useState)({type:"location",user_id:"",zone_id:"",language:"en"}),[_,z]=(0,n.useState)({name:"",content:"",language:"en",template:"custom"});(0,n.useEffect)(()=>{M(),L()},[]);const M=async()=>{try{const e=await fetch("/api/bot-controls/responses"),s=await e.json();a(s.responses||[])}catch(e){console.error("Error fetching templates:",e)}finally{N(!1)}},L=async()=>{try{const e=await fetch("/api/bot-controls/template-functions"),s=await e.json();f(s)}catch(e){console.error("Error fetching template functions:",e)}};return b?(0,g.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-cyan"})}):(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Bot Response Templates"}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e?"bg-green-400":"bg-red-400")}),(0,g.jsx)("span",{className:"text-sm text-gray-400",children:e?"AI Available":"Offline Mode"}),(0,g.jsxs)(r.A,{onClick:()=>w(!0),variant:"primary",children:[(0,g.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"New Template"]})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,g.jsx)(c.A,{title:"Template Functions",className:"lg:col-span-1",children:(0,g.jsx)("div",{className:"space-y-3",children:Object.entries(v.descriptions||{}).map(e=>{let[s,a]=e;return(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/30 rounded-lg",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-white font-medium",children:s}),(0,g.jsx)("div",{className:"text-xs text-gray-400",children:a})]}),(0,g.jsx)(r.A,{size:"sm",variant:"ghost",onClick:()=>(e=>{const s="{".concat(e,"()}");z(e=>(0,t.A)((0,t.A)({},e),{},{content:e.content+s}))})(s),children:(0,g.jsx)(i.A,{className:"w-3 h-3"})})]},s)})})}),(0,g.jsx)(c.A,{title:"AI Suggestions",className:"lg:col-span-2",children:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,g.jsxs)("select",{value:A.type,onChange:e=>C(s=>(0,t.A)((0,t.A)({},s),{},{type:e.target.value})),className:"px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,g.jsx)("option",{value:"location",children:"Location"}),(0,g.jsx)("option",{value:"emergency",children:"Emergency"}),(0,g.jsx)("option",{value:"help_request",children:"Help Request"}),(0,g.jsx)("option",{value:"battery_low",children:"Battery Low"})]}),(0,g.jsx)("input",{type:"text",placeholder:"User ID",value:A.user_id,onChange:e=>C(s=>(0,t.A)((0,t.A)({},s),{},{user_id:e.target.value})),className:"px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"}),(0,g.jsx)("input",{type:"text",placeholder:"Zone ID",value:A.zone_id,onChange:e=>C(s=>(0,t.A)((0,t.A)({},s),{},{zone_id:e.target.value})),className:"px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"}),(0,g.jsxs)(r.A,{onClick:async()=>{try{const e=new URLSearchParams({trigger_type:A.type,language:A.language,count:"5"});A.user_id&&e.append("user_id",A.user_id),A.zone_id&&e.append("zone_id",A.zone_id);const s=await fetch("/api/bot-controls/response-suggestions?".concat(e)),a=await s.json();j(a.suggestions||[])}catch(e){console.error("Error generating suggestions:",e)}},variant:"primary",className:"flex items-center",children:[(0,g.jsx)(d,{className:"w-4 h-4 mr-2"}),"Generate"]})]}),(0,g.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[o.map((e,s)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/30 rounded-lg",children:[(0,g.jsx)("div",{className:"flex-1 text-white text-sm",children:e}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(r.A,{size:"sm",variant:"ghost",onClick:()=>(e=>{z(s=>(0,t.A)((0,t.A)({},s),{},{content:e}))})(e),children:(0,g.jsx)(x.A,{className:"w-3 h-3"})}),(0,g.jsx)(r.A,{size:"sm",variant:"ghost",onClick:()=>{return s=e,void navigator.clipboard.writeText(s);var s},children:(0,g.jsx)(h,{className:"w-3 h-3"})})]})]},s)),0===o.length&&(0,g.jsx)("p",{className:"text-gray-400 text-center py-4",children:"No suggestions generated yet"})]})]})})]}),(0,g.jsx)(c.A,{title:"Response Templates",children:(0,g.jsxs)("div",{className:"space-y-3",children:[s.map(e=>(0,g.jsx)("div",{className:"p-4 bg-dark-800/30 rounded-lg border border-dark-600 hover:border-accent-cyan/30 transition-colors",children:(0,g.jsxs)("div",{className:"flex justify-between items-start",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,g.jsx)("h3",{className:"font-semibold text-white",children:e.name}),(0,g.jsx)("span",{className:"px-2 py-1 bg-accent-cyan/20 text-accent-cyan rounded-full text-xs",children:e.language.toUpperCase()}),(0,g.jsx)("span",{className:"px-2 py-1 bg-dark-700 text-gray-300 rounded-full text-xs",children:e.template})]}),(0,g.jsx)("p",{className:"text-gray-300 text-sm mb-2 line-clamp-2",children:e.content}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[(0,g.jsxs)("span",{children:["Type: ",e.response_type]}),(0,g.jsxs)("span",{children:["Priority: ",e.priority]}),(0,g.jsxs)("span",{className:"flex items-center",children:[(0,g.jsx)(m.A,{className:"w-3 h-3 mr-1"}),e.is_active?"Active":"Inactive"]})]})]}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)(r.A,{size:"sm",variant:"ghost",children:(0,g.jsx)(x.A,{className:"w-4 h-4"})}),(0,g.jsx)(r.A,{size:"sm",variant:"ghost",children:(0,g.jsx)(p,{className:"w-4 h-4"})}),(0,g.jsx)(r.A,{size:"sm",variant:"ghost",children:(0,g.jsx)(u.A,{className:"w-4 h-4"})})]})]})},e.id)),0===s.length&&(0,g.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No templates created yet"})]})}),k&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,g.jsxs)(c.A,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,g.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-white",children:"Create Response Template"}),(0,g.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white",children:(0,g.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template Name"}),(0,g.jsx)("input",{type:"text",value:_.name,onChange:e=>z(s=>(0,t.A)((0,t.A)({},s),{},{name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",placeholder:"e.g., Welcome Message"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Language"}),(0,g.jsxs)("select",{value:_.language,onChange:e=>z(s=>(0,t.A)((0,t.A)({},s),{},{language:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,g.jsx)("option",{value:"en",children:"English"}),(0,g.jsx)("option",{value:"ru",children:"Russian"})]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template Content"}),(0,g.jsx)("textarea",{value:_.content,onChange:e=>z(s=>(0,t.A)((0,t.A)({},s),{},{content:e.target.value})),rows:6,className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",placeholder:"Use {variable} for substitution and {function()} for dynamic content..."})]}),(0,g.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,g.jsxs)(r.A,{onClick:async()=>{try{(await fetch("/api/bot-controls/responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,t.A)((0,t.A)({},_),{},{response_type:"template"}))})).ok&&(w(!1),z({name:"",content:"",language:"en",template:"custom"}),M())}catch(e){console.error("Error creating template:",e)}},variant:"primary",children:[(0,g.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Create Template"]}),(0,g.jsx)(r.A,{variant:"secondary",onClick:()=>w(!1),children:"Cancel"})]})]})]})})]})}},1360:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4319:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4596:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},8693:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},9855:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=573.ce237325.chunk.js.map