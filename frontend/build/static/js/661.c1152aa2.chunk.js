"use strict";(self.webpackChunkmeshtastic_admin_frontend=self.webpackChunkmeshtastic_admin_frontend||[]).push([[661],{4661:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(2555),l=t(5043),n=t(3230),r=t(5592),c=t(579);const i=()=>(0,c.jsx)("svg",{className:"w-6 h-6 text-accent-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),o=()=>(0,c.jsx)("svg",{className:"w-6 h-6 text-accent-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),d=()=>(0,c.jsx)("svg",{className:"w-6 h-6 text-accent-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),x=()=>(0,c.jsx)("svg",{className:"w-6 h-6 text-accent-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5-5-5h5V12h-5l5-5 5 5h-5v5z"})}),m=()=>(0,c.jsx)("svg",{className:"w-6 h-6 text-accent-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),u=()=>{const[e,s]=(0,l.useState)([]),[t,u]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[f,j]=(0,l.useState)(!0),[g,b]=(0,l.useState)(null),[y,N]=(0,l.useState)("rules"),[v,k]=(0,l.useState)(!1),[w,_]=(0,l.useState)(null),[A,C]=(0,l.useState)({name:"",description:"",alert_type:"zone_entry",severity:"medium",zone_id:"",conditions:{time_restrictions:null,max_capacity:"",speed_limits:{max_speed_mps:""}},target_groups:[],escalation_rules:{enabled:!1,steps:[{step_number:1,delay_seconds:300,channels:["websocket"],target_groups:[],message_template:""}]}});(0,l.useEffect)(()=>{S(),E(),z()},[]);const S=async()=>{try{const e=await fetch("/api/zones/");if(!e.ok)throw new Error("Failed to fetch zones: ".concat(e.status," ").concat(e.statusText));const t=await e.json();s(t.zones||[]),b(null)}catch(g){console.error("Error fetching zones:",g),b("Failed to load zones. Please try again.")}},E=async()=>{try{const e=await fetch("/api/users/groups");if(!e.ok)throw new Error("Failed to fetch groups: ".concat(e.status," ").concat(e.statusText));const s=await e.json();u(s.groups||[]),b(null)}catch(g){console.error("Error fetching groups:",g),b("Failed to load user groups. Please try again.")}},z=async()=>{try{const e=await fetch("/api/alerts/rules/");if(!e.ok)throw new Error("Failed to fetch alert rules: ".concat(e.status," ").concat(e.statusText));const s=await e.json();p(s.rules||[]),b(null)}catch(g){console.error("Error fetching alert rules:",g),b("Failed to load alert rules. Please try again.")}finally{j(!1)}},R=()=>{C({name:"",description:"",alert_type:"zone_entry",severity:"medium",zone_id:"",conditions:{time_restrictions:null,max_capacity:"",speed_limits:{max_speed_mps:""}},target_groups:[],escalation_rules:{enabled:!1,steps:[{step_number:1,delay_seconds:300,channels:["websocket"],target_groups:[],message_template:""}]}})},T=(e,s,t)=>{const l=A.escalation_rules.steps.map((l,n)=>n===e?(0,a.A)((0,a.A)({},l),{},{[s]:t}):l);C((0,a.A)((0,a.A)({},A),{},{escalation_rules:(0,a.A)((0,a.A)({},A.escalation_rules),{},{steps:l})}))};return f?(0,c.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-cyan"})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Alert Configuration"}),(0,c.jsxs)(r.A,{onClick:()=>k(!0),variant:"primary",className:"flex items-center space-x-2",children:[(0,c.jsx)("span",{children:"+"}),(0,c.jsx)("span",{children:"Create Alert Rule"})]})]}),g&&(0,c.jsxs)("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,c.jsx)("span",{className:"text-red-400 font-medium",children:"Error"})]}),(0,c.jsx)(r.A,{onClick:()=>{b(null),S(),E(),z()},variant:"secondary",className:"text-sm",children:"Retry"})]}),(0,c.jsx)("p",{className:"text-red-300 mt-2",children:g})]}),(0,c.jsx)("div",{className:"flex space-x-1 bg-dark-800/50 p-1 rounded-lg",children:[{id:"rules",label:"Alert Rules"},{id:"escalation",label:"Escalation Rules"},{id:"notifications",label:"Notification Settings"}].map(e=>(0,c.jsx)("button",{onClick:()=>N(e.id),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(y===e.id?"bg-accent-cyan text-dark-900":"text-gray-300 hover:text-white"),children:e.label},e.id))}),"rules"===y&&(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,c.jsx)(n.A,{title:"Alert Rules",icon:(0,c.jsx)(i,{}),children:(0,c.jsxs)("div",{className:"space-y-3",children:[h.map(s=>{var t;return(0,c.jsxs)("div",{className:"p-4 bg-dark-800/50 rounded-lg border border-dark-600",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-white",children:s.name}),(0,c.jsx)("p",{className:"text-sm text-gray-300",children:s.description})]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsx)("button",{onClick:()=>(e=>{_(e);const s=(0,a.A)((0,a.A)({},e),{},{conditions:e.conditions?JSON.parse(e.conditions):{time_restrictions:null,max_capacity:"",speed_limits:{max_speed_mps:""}},target_groups:e.target_groups?JSON.parse(e.target_groups):[],escalation_rules:e.escalation_rules?JSON.parse(e.escalation_rules):{enabled:!1,steps:[{step_number:1,delay_seconds:300,channels:["websocket"],target_groups:[],message_template:""}]}});C(s)})(s),className:"text-accent-cyan hover:text-accent-cyan/80 text-sm",children:"Edit"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this alert rule?"))try{const s=await fetch("/api/alerts/rules/".concat(e),{method:"DELETE"});if(s.ok)console.log("Alert rule deleted"),z(),b(null);else{const e=await s.json().catch(()=>({detail:"Unknown error"}));b("Failed to delete alert rule: ".concat(e.detail||s.statusText))}}catch(g){console.error("Error deleting alert rule:",g),b("Network error while deleting alert rule. Please try again.")}})(s.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[(0,c.jsxs)("span",{children:["Type: ",s.alert_type]}),(0,c.jsxs)("span",{children:["Severity: ",s.severity]}),(0,c.jsxs)("span",{children:["Zone: ",(null===(t=e.find(e=>e.id===parseInt(s.zone_id)))||void 0===t?void 0:t.name)||"All"]})]})]},s.id)}),0===h.length&&(0,c.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No alert rules configured"})]})}),(0,c.jsx)(n.A,{title:"Rule Statistics",icon:(0,c.jsx)(o,{}),children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-300",children:"Total Rules:"}),(0,c.jsx)("span",{className:"text-white font-semibold",children:h.length})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-300",children:"Active Rules:"}),(0,c.jsx)("span",{className:"text-green-400 font-semibold",children:h.filter(e=>e.is_active).length})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-300",children:"Rules with Escalation:"}),(0,c.jsx)("span",{className:"text-accent-cyan font-semibold",children:h.filter(e=>{try{return(e.escalation_rules?JSON.parse(e.escalation_rules):{}).enabled}catch(s){return!1}}).length})]})]})})]}),"escalation"===y&&(0,c.jsx)(n.A,{title:"Escalation Rule Builder",icon:(0,c.jsx)(d,{}),children:(0,c.jsx)("div",{className:"space-y-6",children:(0,c.jsxs)("div",{className:"bg-dark-800/30 p-4 rounded-lg",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Default Escalation Template"}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/50 rounded",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-white font-medium",children:"Step 1:"}),(0,c.jsx)("span",{className:"text-gray-300 ml-2",children:"Initial Alert (0 min)"})]}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:"WebSocket"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/50 rounded",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-white font-medium",children:"Step 2:"}),(0,c.jsx)("span",{className:"text-gray-300 ml-2",children:"Escalate to Supervisors (5 min)"})]}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:"Email + WebSocket"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/50 rounded",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-white font-medium",children:"Step 3:"}),(0,c.jsx)("span",{className:"text-gray-300 ml-2",children:"Emergency Response (15 min)"})]}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:"SMS + Email + WebSocket"})]})]})]})})}),"notifications"===y&&(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,c.jsx)(n.A,{title:"Notification Channels",icon:(0,c.jsx)(x,{}),children:(0,c.jsx)("div",{className:"space-y-4",children:[{name:"WebSocket",description:"Real-time browser notifications",enabled:!0},{name:"Email",description:"Email notifications for escalation",enabled:!0},{name:"SMS",description:"SMS notifications for critical alerts",enabled:!1},{name:"Push Notifications",description:"Mobile push notifications",enabled:!1}].map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-800/30 rounded-lg",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-medium text-white",children:e.name}),(0,c.jsx)("p",{className:"text-sm text-gray-300",children:e.description})]}),(0,c.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,c.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:e.enabled}),(0,c.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-cyan"})]})]},e.name))})}),(0,c.jsx)(n.A,{title:"Notification Preferences",icon:(0,c.jsx)(m,{}),children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Notification Sound"}),(0,c.jsxs)("select",{className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,c.jsx)("option",{children:"Default"}),(0,c.jsx)("option",{children:"Chime"}),(0,c.jsx)("option",{children:"Bell"}),(0,c.jsx)("option",{children:"Alert"}),(0,c.jsx)("option",{children:"None"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Auto-dismiss after (seconds)"}),(0,c.jsx)("input",{type:"number",defaultValue:30,className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-medium text-white",children:"Desktop Notifications"}),(0,c.jsx)("p",{className:"text-sm text-gray-300",children:"Show browser notifications"})]}),(0,c.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,c.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,c.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-cyan"})]})]})]})})]}),(v||w)&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,c.jsx)(n.A,{className:"w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:(0,c.jsxs)("form",{onSubmit:w?async e=>{e.preventDefault();try{const e=await fetch("/api/alerts/rules/".concat(w.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(e.ok)console.log("Alert rule updated"),_(null),R(),z(),b(null);else{const s=await e.json().catch(()=>({detail:"Unknown error"}));b("Failed to update alert rule: ".concat(s.detail||e.statusText))}}catch(g){console.error("Error updating alert rule:",g),b("Network error while updating alert rule. Please try again.")}}:async e=>{e.preventDefault();try{const e=await fetch("/api/alerts/rules/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(e.ok){const s=await e.json();console.log("Alert rule created:",s),k(!1),R(),z(),b(null)}else{const s=await e.json().catch(()=>({detail:"Unknown error"}));b("Failed to create alert rule: ".concat(s.detail||e.statusText))}}catch(g){console.error("Error creating alert rule:",g),b("Network error while creating alert rule. Please try again.")}},children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:w?"Edit Alert Rule":"Create Alert Rule"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rule Name"}),(0,c.jsx)("input",{type:"text",value:A.name,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alert Type"}),(0,c.jsxs)("select",{value:A.alert_type,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{alert_type:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,c.jsx)("option",{value:"zone_entry",children:"Zone Entry"}),(0,c.jsx)("option",{value:"zone_exit",children:"Zone Exit"}),(0,c.jsx)("option",{value:"speeding",children:"Speeding"}),(0,c.jsx)("option",{value:"offline",children:"Offline"}),(0,c.jsx)("option",{value:"battery_low",children:"Battery Low"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Severity"}),(0,c.jsxs)("select",{value:A.severity,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{severity:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,c.jsx)("option",{value:"low",children:"Low"}),(0,c.jsx)("option",{value:"medium",children:"Medium"}),(0,c.jsx)("option",{value:"high",children:"High"}),(0,c.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Zone"}),(0,c.jsxs)("select",{value:A.zone_id,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{zone_id:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none",children:[(0,c.jsx)("option",{value:"",children:"All Zones"}),e.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,c.jsx)("textarea",{value:A.description,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Groups"}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.map(e=>(0,c.jsxs)("label",{className:"flex items-center space-x-2 p-2 bg-dark-800/30 rounded",children:[(0,c.jsx)("input",{type:"checkbox",checked:A.target_groups.includes(e.id),onChange:s=>{const t=s.target.checked?[...A.target_groups,e.id]:A.target_groups.filter(s=>s!==e.id);C((0,a.A)((0,a.A)({},A),{},{target_groups:t}))},className:"rounded border-dark-600 text-accent-cyan focus:ring-accent-cyan"}),(0,c.jsx)("span",{className:"text-white text-sm",children:e.name})]},e.id))})]}),(0,c.jsxs)("div",{className:"mt-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Escalation Rules"}),(0,c.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,c.jsx)("input",{type:"checkbox",checked:A.escalation_rules.enabled,onChange:e=>C((0,a.A)((0,a.A)({},A),{},{escalation_rules:(0,a.A)((0,a.A)({},A.escalation_rules),{},{enabled:e.target.checked})})),className:"rounded border-dark-600 text-accent-cyan focus:ring-accent-cyan"}),(0,c.jsx)("span",{className:"text-gray-300",children:"Enable Escalation"})]})]}),A.escalation_rules.enabled&&(0,c.jsxs)("div",{className:"space-y-4",children:[A.escalation_rules.steps.map((e,s)=>(0,c.jsxs)("div",{className:"p-4 bg-dark-800/30 rounded-lg border border-dark-600",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,c.jsxs)("h4",{className:"font-medium text-white",children:["Step ",e.step_number]}),s>0&&(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{const s=A.escalation_rules.steps.filter((s,t)=>t!==e);C((0,a.A)((0,a.A)({},A),{},{escalation_rules:(0,a.A)((0,a.A)({},A.escalation_rules),{},{steps:s})}))})(s),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Delay (seconds)"}),(0,c.jsx)("input",{type:"number",value:e.delay_seconds,onChange:e=>T(s,"delay_seconds",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notification Channels"}),(0,c.jsx)("div",{className:"space-y-2",children:["websocket","email","sms"].map(t=>(0,c.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,c.jsx)("input",{type:"checkbox",checked:e.channels.includes(t),onChange:a=>{const l=a.target.checked?[...e.channels,t]:e.channels.filter(e=>e!==t);T(s,"channels",l)},className:"rounded border-dark-600 text-accent-cyan focus:ring-accent-cyan"}),(0,c.jsx)("span",{className:"text-gray-300 text-sm capitalize",children:t})]},t))})]})]}),(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Message Template"}),(0,c.jsx)("input",{type:"text",value:e.message_template,onChange:e=>T(s,"message_template",e.target.value),placeholder:"Custom escalation message (optional)",className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none"})]})]},s)),(0,c.jsx)(r.A,{type:"button",onClick:()=>{const e={step_number:A.escalation_rules.steps.length+1,delay_seconds:300,channels:["websocket"],target_groups:[],message_template:""};C((0,a.A)((0,a.A)({},A),{},{escalation_rules:(0,a.A)((0,a.A)({},A.escalation_rules),{},{steps:[...A.escalation_rules.steps,e]})}))},variant:"secondary",className:"w-full",children:"Add Escalation Step"})]})]}),(0,c.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,c.jsx)(r.A,{type:"submit",variant:"primary",children:w?"Update Rule":"Create Rule"}),(0,c.jsx)(r.A,{type:"button",variant:"secondary",onClick:()=>{k(!1),_(null),R()},children:"Cancel"})]})]})})})]})}}}]);
//# sourceMappingURL=661.c1152aa2.chunk.js.map