/*! For license information please see 163.aa677f02.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmeshtastic_admin_frontend=self.webpackChunkmeshtastic_admin_frontend||[]).push([[163],{5088:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8163:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(2555),r=s(5043),l=s(4117),n=s(6139),i=s(3230),c=s(5592),d=s(1639);const o=(0,d.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=s(7118);const u=(0,d.A)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var m=s(8006);const h=(0,d.A)("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);var g=s(5088);const b=(0,d.A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var y=s(9855),p=s(579);const j=()=>{var e,t,s,d;const{t:j}=(0,l.Bd)(),{subscribe:v,isConnected:k}=(0,n.h3)(),[f,N]=(0,r.useState)([]),[_,w]=(0,r.useState)([]),[A,C]=(0,r.useState)({total_users:0,active_sessions:0,registered_users:0}),[S,E]=(0,r.useState)(!0),[M,B]=(0,r.useState)(null),[z,L]=(0,r.useState)(!1),[U,F]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),[P,D]=(0,r.useState)({id:"",long_name:"",short_name:"",nickname:"",latitude:"",longitude:"",altitude:"",battery_level:"",tracking_enabled:!0});(0,r.useEffect)(()=>{q(),G(),O()},[]),(0,r.useEffect)(()=>{const e=v("user_update",e=>{q()}),t=v("statistics_update",e=>{e.data.user_stats&&C(t=>(0,a.A)((0,a.A)({},t),e.data.user_stats))});return()=>{e(),t()}},[v]);const q=async()=>{try{const e=localStorage.getItem("token");console.log("DEBUG: fetchUsers token:",e?e.substring(0,50)+"...":"no token");const t=await fetch("/api/users/?limit=100&offset=0",{headers:{Authorization:e?"Bearer ".concat(e):""}});console.log("DEBUG: fetchUsers response status:",t.status);const s=await t.json();N(s.users||[])}catch(e){console.error("Error fetching users:",e)}finally{E(!1)}},G=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/users/stats/overview",{headers:{Authorization:e?"Bearer ".concat(e):""}}),s=await t.json();C(e=>(0,a.A)((0,a.A)({},e),s))}catch(e){console.error("Error fetching user stats:",e)}},O=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/users/groups/",{headers:{Authorization:e?"Bearer ".concat(e):""}}),s=await t.json();w(s.groups||[])}catch(e){console.error("Error fetching user groups:",e)}},W=e=>e?new Date(e).toLocaleString():j("time.never"),H=e=>{switch(e){case"online":return"text-green-400";case"offline":return"text-red-400";default:return"text-gray-400"}},J=e=>e?e>70?"text-green-400":e>30?"text-yellow-400":"text-red-400":"text-gray-400";return S?(0,p.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,p.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-cyan"})}):(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center",children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-white",children:j("users.title")}),(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsxs)(c.A,{onClick:()=>L(!0),className:"flex items-center space-x-2",children:[(0,p.jsx)(o,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:j("users.add_user")})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(k?"bg-green-400":"bg-red-400")}),(0,p.jsx)("span",{className:"text-sm text-gray-400",children:j(k?"users.live_updates":"users.disconnected")})]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,p.jsxs)(i.A,{className:"text-center",children:[(0,p.jsx)(x.A,{className:"w-8 h-8 text-accent-cyan mx-auto mb-2"}),(0,p.jsx)("div",{className:"text-2xl font-bold text-white",children:A.total_users}),(0,p.jsx)("div",{className:"text-sm text-gray-400",children:j("users.total_users")})]}),(0,p.jsxs)(i.A,{className:"text-center",children:[(0,p.jsx)(u,{className:"w-8 h-8 text-accent-green mx-auto mb-2"}),(0,p.jsx)("div",{className:"text-2xl font-bold text-white",children:A.active_sessions}),(0,p.jsx)("div",{className:"text-sm text-gray-400",children:j("users.active_sessions")})]}),(0,p.jsxs)(i.A,{className:"text-center",children:[(0,p.jsx)(o,{className:"w-8 h-8 text-accent-purple mx-auto mb-2"}),(0,p.jsx)("div",{className:"text-2xl font-bold text-white",children:A.registered_users}),(0,p.jsx)("div",{className:"text-sm text-gray-400",children:j("users.registered")})]})]}),(0,p.jsx)(i.A,{title:j("users.users"),children:(0,p.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[f.map(e=>{var t;return(0,p.jsx)("div",{className:"p-4 bg-dark-800/30 rounded-lg border border-dark-600 hover:border-accent-cyan/30 transition-colors cursor-pointer",onClick:()=>B(e),children:(0,p.jsxs)("div",{className:"flex justify-between items-start",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,p.jsx)("h3",{className:"font-semibold text-white",children:e.long_name||e.short_name||e.nickname||e.id}),(0,p.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(H(e.device_status)," bg-current/20"),children:(null===(t=e.device_status)||void 0===t?void 0:t.toUpperCase())||j("users.unknown")}),"registered"===e.registration_status&&(0,p.jsx)("span",{className:"px-2 py-1 bg-green-600 text-white rounded-full text-xs",children:j("users.registered_status")})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400 mb-2",children:[(0,p.jsxs)("span",{children:[j("users.id")," ",e.id]}),e.latitude&&e.longitude&&(0,p.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,p.jsx)(m.A,{className:"w-3 h-3"}),e.latitude.toFixed(4),", ",e.longitude.toFixed(4)]}),e.battery_level&&(0,p.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,p.jsx)(h,{className:"w-3 h-3"}),(0,p.jsxs)("span",{className:J(e.battery_level),children:[e.battery_level,"%"]})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[(0,p.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,p.jsx)(g.A,{className:"w-3 h-3"}),j("users.last_seen_label")," ",W(e.last_seen)]}),e.last_location_update&&(0,p.jsxs)("span",{children:[j("users.last_location")," ",W(e.last_location_update)]})]})]}),(0,p.jsxs)("div",{className:"flex space-x-2",children:[(0,p.jsx)(c.A,{size:"sm",variant:"secondary",onClick:t=>{t.stopPropagation(),(e=>{I(e),D({id:e.id,long_name:e.long_name||"",short_name:e.short_name||"",nickname:e.nickname||"",latitude:e.latitude||"",longitude:e.longitude||"",altitude:e.altitude||"",battery_level:e.battery_level||"",tracking_enabled:!1!==e.tracking_enabled}),F(!0)})(e)},children:(0,p.jsx)(b,{className:"w-4 h-4"})}),(0,p.jsx)(c.A,{size:"sm",variant:"danger",onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm(j("users.confirm_delete")))try{const t=localStorage.getItem("token"),s=await fetch("/api/users/".concat(e),{method:"DELETE",headers:{Authorization:t?"Bearer ".concat(t):""}});s.ok?(q(),G()):console.error("Error deleting user:",s.statusText)}catch(t){console.error("Error deleting user:",t)}})(e.id)},children:(0,p.jsx)(y.A,{className:"w-4 h-4"})})]})]})},e.id)}),0===f.length&&(0,p.jsx)("p",{className:"text-gray-400 text-center py-8",children:j("users.no_users")})]})}),(0,p.jsx)(i.A,{title:j("users.user_groups"),className:"mt-6",children:(0,p.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[_.map(e=>(0,p.jsx)("div",{className:"p-4 bg-dark-800/30 rounded-lg border border-dark-600",children:(0,p.jsx)("div",{className:"flex justify-between items-start",children:(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"font-semibold text-white",children:e.name}),(0,p.jsx)("p",{className:"text-sm text-gray-400",children:e.description}),(0,p.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[j("users.users_label")," ",e.user_count||0]})]})})},e.id)),0===_.length&&(0,p.jsx)("p",{className:"text-gray-400 text-center py-8",children:j("users.no_groups")})]})}),M&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,p.jsxs)(i.A,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,p.jsx)("h2",{className:"text-xl font-bold text-white",children:j("users.details")}),(0,p.jsx)("button",{onClick:()=>B(null),className:"text-gray-400 hover:text-white",children:(0,p.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.user_id")}),(0,p.jsx)("p",{className:"text-white",children:M.id})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.status")}),(0,p.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(H(M.device_status)," bg-current/20"),children:(null===(e=M.device_status)||void 0===e?void 0:e.toUpperCase())||j("users.unknown")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.long_name")}),(0,p.jsx)("p",{className:"text-white",children:M.long_name||j("users.n_a")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.short_name")}),(0,p.jsx)("p",{className:"text-white",children:M.short_name||j("users.n_a")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.nickname")}),(0,p.jsx)("p",{className:"text-white",children:M.nickname||j("users.n_a")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.registration_status")}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("registered"===M.registration_status?"text-green-400 bg-green-400/20":"text-yellow-400 bg-yellow-400/20"),children:(null===(t=M.registration_status)||void 0===t?void 0:t.toUpperCase())||j("users.unregistered")}),"registered"!==M.registration_status&&(0,p.jsx)(c.A,{size:"sm",onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""},body:JSON.stringify({registration_status:"registered"})});s.ok?(B(e=>(0,a.A)((0,a.A)({},e),{},{registration_status:"registered"})),q(),G()):console.error("Error registering user:",s.statusText)}catch(t){console.error("Error registering user:",t)}})(M.id),children:j("users.register")})]})]})]}),(M.latitude||M.longitude)&&(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.location")}),(0,p.jsxs)("p",{className:"text-white",children:[null===(s=M.latitude)||void 0===s?void 0:s.toFixed(6),", ",null===(d=M.longitude)||void 0===d?void 0:d.toFixed(6),M.altitude&&", ".concat(j("users.altitude")," ").concat(M.altitude,"m")]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.battery_level")}),(0,p.jsx)("p",{className:"text-white ".concat(J(M.battery_level)),children:M.battery_level?"".concat(M.battery_level,"%"):j("users.n_a")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.tracking_enabled")}),(0,p.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(M.tracking_enabled?"text-green-400 bg-green-400/20":"text-red-400 bg-red-400/20"),children:M.tracking_enabled?j("users.yes"):j("users.no")})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.last_seen")}),(0,p.jsx)("p",{className:"text-white",children:W(M.last_seen)})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.last_location_update")}),(0,p.jsx)("p",{className:"text-white",children:W(M.last_location_update)})]})]})]})]})}),z&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,p.jsxs)(i.A,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,p.jsx)("h2",{className:"text-xl font-bold text-white",children:j("users.add_new_user")}),(0,p.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-white",children:(0,p.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.user_id_required")}),(0,p.jsx)("input",{type:"text",value:P.id,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{id:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan",required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.nickname")}),(0,p.jsx)("input",{type:"text",value:P.nickname,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{nickname:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.long_name")}),(0,p.jsx)("input",{type:"text",value:P.long_name,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{long_name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.short_name")}),(0,p.jsx)("input",{type:"text",value:P.short_name,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{short_name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.latitude")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.latitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{latitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.longitude")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.longitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{longitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.altitude_label")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.altitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{altitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.battery_level_label")}),(0,p.jsx)("input",{type:"number",min:"0",max:"100",value:P.battery_level,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{battery_level:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("input",{type:"checkbox",id:"tracking_enabled",checked:P.tracking_enabled,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{tracking_enabled:e.target.checked})),className:"rounded"}),(0,p.jsx)("label",{htmlFor:"tracking_enabled",className:"text-sm text-gray-300",children:j("users.tracking_enabled_label")})]}),(0,p.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,p.jsx)(c.A,{variant:"secondary",onClick:()=>L(!1),children:j("users.cancel")}),(0,p.jsx)(c.A,{onClick:()=>{(async e=>{try{const t=localStorage.getItem("token");console.log("DEBUG: createUser token:",t?t.substring(0,50)+"...":"no token");const s=await fetch("/api/users/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""},body:JSON.stringify(e)});console.log("DEBUG: createUser response status:",s.status),s.ok?(q(),G(),L(!1),D({id:"",long_name:"",short_name:"",nickname:"",latitude:"",longitude:"",altitude:"",battery_level:"",tracking_enabled:!0})):console.error("Error creating user:",s.statusText)}catch(t){console.error("Error creating user:",t)}})({user:{longName:P.long_name,shortName:P.short_name},position:{latitude:P.latitude?parseFloat(P.latitude):null,longitude:P.longitude?parseFloat(P.longitude):null,altitude:P.altitude?parseFloat(P.altitude):null},deviceMetrics:{batteryLevel:P.battery_level?parseInt(P.battery_level):null},id:P.id,nickname:P.nickname,tracking_enabled:P.tracking_enabled})},disabled:!P.id,children:j("users.add_user")})]})]})]})}),U&&T&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,p.jsxs)(i.A,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,p.jsx)("h2",{className:"text-xl font-bold text-white",children:j("users.edit_user")}),(0,p.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-white",children:(0,p.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.user_id")}),(0,p.jsx)("input",{type:"text",value:P.id,disabled:!0,className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-gray-400 cursor-not-allowed"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.nickname")}),(0,p.jsx)("input",{type:"text",value:P.nickname,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{nickname:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.long_name")}),(0,p.jsx)("input",{type:"text",value:P.long_name,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{long_name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.short_name")}),(0,p.jsx)("input",{type:"text",value:P.short_name,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{short_name:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.latitude")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.latitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{latitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.longitude")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.longitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{longitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.altitude_label")}),(0,p.jsx)("input",{type:"number",step:"any",value:P.altitude,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{altitude:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:j("users.battery_level_label")}),(0,p.jsx)("input",{type:"number",min:"0",max:"100",value:P.battery_level,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{battery_level:e.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white focus:border-accent-cyan"})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("input",{type:"checkbox",id:"tracking_enabled_edit",checked:P.tracking_enabled,onChange:e=>D((0,a.A)((0,a.A)({},P),{},{tracking_enabled:e.target.checked})),className:"rounded"}),(0,p.jsx)("label",{htmlFor:"tracking_enabled_edit",className:"text-sm text-gray-300",children:j("users.tracking_enabled_label")})]}),(0,p.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,p.jsx)(c.A,{variant:"secondary",onClick:()=>F(!1),children:j("users.cancel")}),(0,p.jsx)(c.A,{onClick:()=>{const e={user:{longName:P.long_name,shortName:P.short_name},position:{latitude:P.latitude?parseFloat(P.latitude):null,longitude:P.longitude?parseFloat(P.longitude):null,altitude:P.altitude?parseFloat(P.altitude):null},deviceMetrics:{batteryLevel:P.battery_level?parseInt(P.battery_level):null},nickname:P.nickname,tracking_enabled:P.tracking_enabled};(async(e,t)=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:s?"Bearer ".concat(s):""},body:JSON.stringify(t)});a.ok?(q(),F(!1),I(null)):console.error("Error updating user:",a.statusText)}catch(s){console.error("Error updating user:",s)}})(T.id,e)},children:j("users.update_user")})]})]})]})})]})}},9855:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=163.aa677f02.chunk.js.map